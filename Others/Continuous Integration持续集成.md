在**现代软件工程实践**中，尤其是中大型项目和高可靠性系统，**每次代码提交必须通过 CI（Continuous Integration，持续集成）几乎是必须的原则**，原因如下——我按哲学、工程、制度三层拆给你看：

------

## 1️⃣ 哲学层面

> **软件系统的状态一致性、可靠性和可维护性，依赖每一次变更都是可验证的。**

- 每次提交都是对系统状态的修改。
- 如果不验证就合并：
  - 可能破坏对象不变量
  - 引入并发 bug / 内存错误 / UB
- 哲学上讲：
  - **“不可验证的提交 = 不可控的系统状态”**

------

## 2️⃣ 工程层面

### 为什么必须

1. **及时发现问题**
   - 早期发现错误比后期调试成本低 10–100 倍
2. **保证构建稳定**
   - CI 检查：
     - 编译警告/错误
     - 单元测试
     - 静态分析
     - 动态检测（如 ASan/UBSan）
3. **跨团队协作**
   - 多人修改同一模块时，CI 可以自动检测冲突或破坏行为
4. **版本控制与 traceability**
   - 每次提交通过 CI = 记录“通过状态一致性检查的版本”

### 实际效果

- 减少“破坏编译的提交”
- 减少“破坏状态一致性的提交”
- 提高团队对 unsafe / UB / 并发错误的可控性

------

## 3️⃣ 制度层面

### CI 作为制度的强制手段

- **制度规则**：
  1. 所有提交必须触发 CI
  2. CI 未通过 → 拒绝合并
  3. CI 包含：
     - 编译器警告为错误
     - 静态分析
     - 单元测试覆盖关键逻辑
     - 动态检查（必要时）
- **为什么必须**
  - 这是**把哲学变成工程约束的最直接手段**
  - 不依赖个人自觉
  - 自动化、可审计

------

## 4️⃣ 异常情况 & 弹性

- **局部实验性分支**：
  - 可以暂时不通过全量 CI，但绝不能合并到主干
- **紧急修复**：
  - CI 仍应覆盖关键部分
  - 人工审查 + 最小变更

> 核心原则：
>
> - **每次合并到主干 / release 分支，必须通过 CI**
> - **CI 是团队制度化的安全网**

------

## ✅ 总结

> **每次代码提交必须通过 CI 是现代软件工程的“物理定律”**，
> 它把哲学上追求状态一致性和可靠性的目标，强制转化为可执行的工程制度。

------

如果你愿意，我可以帮你画一个**“提交 → CI → Review → 合并 → 状态一致性闭环图”**，把这个制度可视化，让团队一眼就理解。

你希望我画吗？